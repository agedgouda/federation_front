import{j as O,r as f,k as F,l as L,n as $,p as T,b as o,c as C,w as n,d as e,q as V,h as t,t as s,g as v,s as i,F as E,v as R,x as y,o as M,y as W,z as B,A as D,B as A,C as S,D as q,a as I,_ as U,e as G,f as N,i as K,E as P,G as J}from"./index-0e7064b6.js";import{_ as z}from"./TableFormat-88f5c178.js";const H=O("ship",()=>{const _=f([]);async function m(l){try{return(await F.get("http://makdar.kidevelopment.com/api/ships/class/faction/"+l)).data.data}catch(d){throw new Error(d.message)}}async function b(l){try{return(await F.get("http://makdar.kidevelopment.com/api/ships/class/"+l)).data.data}catch(d){throw new Error(d.message)}}async function c(l){try{return(await F.post("http://makdar.kidevelopment.com/api/ships/",{name:l.name,ship_class_id:l.ship_class_id,registry:l.registry})).data}catch(d){throw new Error(d.message)}}return{ships:_,getFactionClasses:m,getClassShips:b,setShip:c}}),Q=["src"],X={class:"space-y-3 text-center md:text-left lg:mx-12"},Y={class:"flex justify-center md:block"},Z={class:"text-2xl"},tt={__name:"FactionCard",props:{faction:{type:Object,required:!0}},setup(_){const m=_,b=L();$(()=>b.userName),f(!1);const c=f(m.faction);return T(()=>m.faction,l=>{c.value=l}),(l,d)=>(o(),C(v,null,{default:n(()=>[e(V,{type:"justify-around lg:justify-center"},{default:n(()=>[t("img",{src:c.value.logo_url,width:"100"},null,8,Q),t("div",X,[t("div",Y,[t("h1",Z,[t("b",null,s(c.value.name),1)])])])]),_:1})]),_:1}))}},lt={class:"flex flex-wrap"},et=t("div",{class:"w-2 bg-green-500 h-3 m-1"},null,-1),st={class:"w-full","m-1":"",key:"linebreak"},at={class:"w-full","m-1":"",key:"linebreak"},nt={class:"w-full","m-1":"",key:"linebreak"},r={__name:"Boxes",props:{total:Number},setup(_){return(m,b)=>(o(),i("div",lt,[(o(!0),i(E,null,R(_.total,c=>(o(),i(E,{key:c},[et,c%5===0&&_.total%5===0?(o(),i("div",st)):y("",!0),c%4===0&&_.total%4===0&&_.total%5!==0?(o(),i("div",at)):y("",!0),c%3===0&&_.total%3===0&&_.total%5!==0&&_.total%4!==0?(o(),i("div",nt)):y("",!0)],64))),128))]))}},ot={class:"text-center space-y-1 md:text-left md:mr-6"},ut={class:"text-xl"},rt={class:"italic"},ct={key:0},it={key:1},dt={class:"grid grid-cols-3 lg:grid-cols-3 gap-6 mb-6"},_t={class:"flex flex-col justify-between"},ht=t("h4",{class:"text-xl"},"Movement",-1),mt=t("thead",null,[t("tr",null,[t("th",null,"Base Speed"),t("th",null,"Mode"),t("th",null,"Cost")])],-1),pt=t("td",null,"8",-1),vt=t("td",null,"16",-1),ft=t("td",null,"24",-1),yt=t("h4",{class:"text-xl"},"Defenses",-1),bt=t("thead",null,[t("tr",null,[t("th",null,"Location"),t("th",null,"Size")])],-1),gt=t("td",null,"Shield 1",-1),wt=t("td",null,"Shield 2",-1),xt=t("td",null,"Shield 3",-1),kt=t("td",null,"Forward Hull",-1),St=t("td",null,"Rear Hull",-1),$t={key:0},Ct=t("td",null,"Rear Hull",-1),jt={key:1},Ft=t("td",null,"Rear Hull",-1),Bt={class:"flex flex-col justify-between"},Vt=t("h4",{class:"text-xl"},"Ship Compartments",-1),Et=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Size")])],-1),Dt=t("td",null,"Auxiliary Control",-1),At=t("td",null,"Bridge",-1),Nt=t("td",null,"Emergency Bridge",-1),Lt=t("td",null,"Lab",-1),Rt=t("td",null,"Shuttle Bays",-1),Mt=t("td",null,"Transporter",-1),zt=t("td",null,"Tractor Beam",-1),Ht=t("td",null,"Reactor",-1),Ot=t("td",null,"Impulse Engine",-1),Tt=t("td",null,"Battery",-1),Wt=t("td",null,"Right Warp",-1),qt=t("td",null,"Left Warp",-1),It={key:0},Ut=t("td",null,"Center Warp",-1),Gt={class:"flex flex-col justify-between"},Kt=t("h4",{class:"text-xl"},"Weapons",-1),Pt=t("thead",null,[t("tr",null,[t("th",null,"Location"),t("th",null,"Arc"),t("th",null,"Name")])],-1),Jt={class:"grid grid-cols-2 lg:grid-cols-2 gap-6 mb-6"},Qt={class:"flex flex-col justify-between"},Xt=["src"],Yt={class:"flex flex-col justify-between"},Zt={key:0},tl={key:1},ll={"data-label":"image",class:"w-20"},el=["src"],sl={key:2,class:"grid grid-cols-3 gap-3"},al={class:"flex items-center"},nl={key:3,class:"flex justify-end"},ol={__name:"CardBoxShip",props:{ship:{type:Object,required:!0}},setup(_){const m=_,b=H(),c=f([]),l=f(m.ship),d=f(m.ship.id),g=f(!1);M(async()=>{try{c.value=await b.getClassShips(d.value)}catch(a){throw console.error(a),new Error(a.message)}});const w=$(()=>c.value.map(a=>({ship_counter_url:a.ship_counter_url,name:a.name+" "+a.registry,id:a.id}))),p=W({name:"",registry:m.ship.registry_stub+" - ",ship_class_id:d.value}),x=()=>{g.value=!g.value},k=()=>{p.name="",p.registry=m.ship.registry_stub+" - ",g.value=!g.value};async function j(){try{const a=await b.setShip(p);c.value.push(a),k()}catch(a){console.error("Error:",a)}}return(a,h)=>(o(),C(v,{class:"mb-6 last:mb-0"},{default:n(()=>[e(V,null,{default:n(()=>[e(V,{type:"justify-start"},{default:n(()=>[t("div",ot,[e(v,{class:"mb-2"},{default:n(()=>[t("h4",ut,[B(s(l.value.faction_identifier)+" "+s(l.value.name)+" ",1),t("span",rt,s(l.value.registry),1)]),t("h3",null,[B(s(l.value.ship_class)+" ",1),l.value.ship_class=="Lead ship"?(o(),i("span",ct,"of class")):(o(),i("span",it,"class"))]),t("div",null,s(l.value.type),1),t("div",null,"Ship Power: "+s(l.value.power),1)]),_:1}),t("div",dt,[t("div",_t,[e(v,{class:"mb-2"},{default:n(()=>[ht,t("h1",null,"Turn Mode: "+s(l.value.turn_mode),1),t("h1",null,"Acceleration Cost: "+s(l.value.acceleration_cost),1),t("h1",null,"Deceleration Cost: "+s(l.value.deceleration_cost),1),t("table",null,[mt,t("tbody",null,[t("tr",null,[pt,t("td",null,s(l.value.base_8_turn_mode),1),t("td",null,s(l.value.base_8_turn_cost),1)]),t("tr",null,[vt,t("td",null,s(l.value.base_16_turn_mode),1),t("td",null,s(l.value.base_16_turn_cost),1)]),t("tr",null,[ft,t("td",null,s(l.value.base_24_turn_mode),1),t("td",null,s(l.value.base_24_turn_cost),1)])])])]),_:1}),e(v,{class:"mb-2"},{default:n(()=>[yt,t("table",null,[bt,t("tbody",null,[t("tr",null,[gt,t("td",null,[e(r,{total:l.value.shield_1},null,8,["total"])])]),t("tr",null,[wt,t("td",null,[e(r,{total:l.value.shield_2},null,8,["total"])])]),t("tr",null,[xt,t("td",null,[e(r,{total:l.value.shield_3},null,8,["total"])])]),t("tr",null,[kt,t("td",null,[e(r,{total:l.value.f_hull},null,8,["total"])])]),t("tr",null,[St,t("td",null,[e(r,{total:l.value.r_hull},null,8,["total"])])]),l.value.c_hull>0?(o(),i("tr",$t,[Ct,t("td",null,s(l.value.c_hull),1)])):y("",!0),l.value.l_hull>0?(o(),i("tr",jt,[Ft,t("td",null,s(l.value.l_hull),1)])):y("",!0)])])]),_:1})]),t("div",Bt,[e(v,{class:"mb-2 last:mb-3"},{default:n(()=>[Vt,t("table",null,[Et,t("tbody",null,[t("tr",null,[Dt,t("td",null,[e(r,{total:l.value.aux},null,8,["total"])])]),t("tr",null,[At,t("td",null,[e(r,{total:l.value.bridge},null,8,["total"])])]),t("tr",null,[Nt,t("td",null,[e(r,{total:l.value.emergency_bridge},null,8,["total"])])]),t("tr",null,[Lt,t("td",null,[e(r,{total:l.value.lab},null,8,["total"])])]),t("tr",null,[Rt,t("td",null,[e(r,{total:l.value.shuttle_bays},null,8,["total"])])]),t("tr",null,[Mt,t("td",null,[e(r,{total:l.value.transporter},null,8,["total"])])]),t("tr",null,[zt,t("td",null,[e(r,{total:l.value.tractor_beam},null,8,["total"])])]),t("tr",null,[Ht,t("td",null,[e(r,{total:l.value.power_reactor},null,8,["total"])])]),t("tr",null,[Ot,t("td",null,[e(r,{total:l.value.impulse},null,8,["total"])])]),t("tr",null,[Tt,t("td",null,[e(r,{total:l.value.battery},null,8,["total"])])]),t("tr",null,[Wt,t("td",null,[e(r,{total:l.value.r_warp},null,8,["total"])])]),t("tr",null,[qt,t("td",null,[e(r,{total:l.value.l_warp},null,8,["total"])])]),l.value.c_warp>0?(o(),i("tr",It,[Ut,t("td",null,[e(r,{total:l.value.c_warp},null,8,["total"])])])):y("",!0)])])]),_:1})]),t("div",Gt,[e(v,{class:"mb-2"},{default:n(()=>[Kt,t("table",null,[Pt,t("tbody",null,[(o(!0),i(E,null,R(l.value.weapons,u=>(o(),i("tr",null,[t("td",null,s(u.location),1),t("td",null,s(u.arc),1),t("td",null,s(u.name),1)]))),256))])])]),_:1})])]),t("div",Jt,[t("div",Qt,[e(v,{class:"mb-2"},{default:n(()=>[t("img",{src:l.value.ship_image_url,style:{"background-color":"white"}},null,8,Xt)]),_:1})]),t("div",Yt,[e(v,{class:"mb-2"},{default:n(()=>[(l.value.id=d.value)?(o(),i("span",Zt,s(l.value.name),1)):(o(),i("span",tl,"Other "+s(l.value.ship_class),1)),B(" Class Ships "),e(z,{"table-data":w.value},{"column-ship_counter_url":n(({item:u})=>[t("td",ll,[t("img",{src:u,style:{"background-color":"white"}},null,8,el)])]),"column-name":n(({item:u})=>[t("td",null,s(u),1)]),_:1},8,["table-data"]),g.value?(o(),i("div",sl,[t("div",null,[e(D,{modelValue:p.name,"onUpdate:modelValue":h[0]||(h[0]=u=>p.name=u)},null,8,["modelValue"])]),t("div",null,[e(D,{modelValue:p.registry,"onUpdate:modelValue":h[1]||(h[1]=u=>p.registry=u)},null,8,["modelValue"])]),t("div",al,[e(A,null,{default:n(()=>[e(S,{color:"danger",label:"Save",small:!0,onClick:h[2]||(h[2]=u=>j())}),e(S,{color:"danger",label:"Cancel",outline:!0,small:!0,onClick:h[3]||(h[3]=u=>k())})]),_:1})])])):y("",!0),g.value?y("",!0):(o(),i("div",nl,[e(A,null,{default:n(()=>[e(S,{color:"info",label:"Add Ship to Class",onClick:h[4]||(h[4]=u=>x()),small:!0})]),_:1})]))]),_:1})])])])]),_:1})]),_:1})]),_:1}))}},ul={"data-label":"image",class:"w-20"},rl=["src"],dl={__name:"FactionView",setup(_){const m=q(),c=$(()=>m.path.replace("/factions/","")).value;L();const l=I(),d=H(),w=f({id:"",logo_url:"",name:""}),p=f({}),x=f([]);M(async()=>{try{w.value=await l.getFaction(c),x.value=await d.getFactionClasses(c)}catch(a){throw console.error(a),new Error(a.message)}});const k=$(()=>x.value.map(a=>({ship_counter_url:a.ship_counter_url,name:a.name,id:a.id}))),j=a=>{p.value=x.value.find(h=>h.id===a)};return(a,h)=>(o(),C(U,null,{default:n(()=>[e(K,null,{default:n(()=>[e(G,{icon:N(P),title:w.value.name,main:""},{default:n(()=>[e(S,{href:"https://twitter.com/jvalenzu?lang=en",target:"_blank",icon:N(J),label:"Dunsel",color:"contrast","rounded-full":"",small:""},null,8,["icon"])]),_:1},8,["icon","title"]),e(tt,{class:"mb-6",faction:w.value},null,8,["faction"]),e(v,{class:"mb-6","has-table":""},{default:n(()=>[e(z,{"table-data":k.value,onOnClick:j},{"column-ship_counter_url":n(({item:u})=>[t("td",ul,[t("img",{src:u,style:{"background-color":"white"}},null,8,rl)])]),"column-name":n(({item:u})=>[t("td",null,s(u)+" Class",1)]),_:1},8,["table-data"])]),_:1}),p.value.id?(o(),C(ol,{key:0,ship:p.value},null,8,["ship"])):y("",!0)]),_:1})]),_:1}))}};export{dl as default};
